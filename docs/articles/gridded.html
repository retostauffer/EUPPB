<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting gridded data â€¢ eupp</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting gridded data">
<meta property="og:description" content="eupp">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eupp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0-2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Gridded data
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/gridded.html">Getting started</a>
    </li>
    <li>
      <a href="../articles/gridded_analysis.html">Analysis</a>
    </li>
    <li>
      <a href="../articles/gridded_forecast.html">Forecasts</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Station data
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/station.html">Getting started</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../contact.html">Contact</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/retostauffer/eupp/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting gridded data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/retostauffer/eupp/blob/HEAD/vignettes/gridded.Rmd" class="external-link"><code>vignettes/gridded.Rmd</code></a></small>
      <div class="hidden name"><code>gridded.Rmd</code></div>

    </div>

    
    
<div class="figure">
<img src="images/download_grib.svg" alt="Rough scheme on the download/processing process."><p class="caption">Rough scheme on the download/processing process.</p>
</div>
<p>The data sets are stored as GRIB version 1 files on the servers alongside with a GRIB index file which contains the inventory. The inventory contains information of all fields inside the GRIB file and allows to partially download the fields.</p>
<p>When downloading data, the package always first accesses the index file via <code><a href="../reference/gridded.html">eupp_get_inventory()</a></code> before starting to download the data. <code><a href="../reference/gridded.html">eupp_download_gridded()</a></code> will download (parts) of the GRIB file and either store it as GRIB, or converts it to NetCDF (requires NetCDF support and ecCodes to be installed; see installation notes).</p>
<p><code><a href="../reference/gridded.html">eupp_get_gridded()</a></code> interfaces <code><a href="../reference/gridded.html">eupp_download_gridded()</a></code> but deletes the file after use and returns an <em>R</em> object. This can be handy for small tasks or checks, or if you want to store the data as <em>R</em> objects yourself. Also requires NetCDF support.</p>
<div class="section level2">
<h2 id="specify-data-to-be-downloaded">Specify data to be downloaded<a class="anchor" aria-label="anchor" href="#specify-data-to-be-downloaded"></a>
</h2>
<p>Before starting downloading data a configuration object must be created using <code><a href="../reference/eupp_config.html">eupp_config()</a></code> which contains the specification of the data to be retrieved.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Loading the package</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://retostauffer.github.io/eupp/" class="external-link">"eupp"</a></span><span class="op">)</span>

<span class="co"># Create custom configuration</span>
<span class="va">conf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eupp_config.html">eupp_config</a></span><span class="op">(</span>product   <span class="op">=</span> <span class="st">"forecast"</span>,
                    level     <span class="op">=</span> <span class="st">"surf"</span>,
                    type      <span class="op">=</span> <span class="st">"ens"</span>,
                    date      <span class="op">=</span> <span class="st">"2017-07-01"</span>,
                    parameter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cp"</span>, <span class="st">"2t"</span><span class="op">)</span>,
                    steps     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">24L</span>, <span class="fl">240L</span><span class="op">)</span>, <span class="co"># +1 and +10 days ahead</span>
                    cache     <span class="op">=</span> <span class="st">"_cache"</span><span class="op">)</span> <span class="co"># cache is not required</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="where-is-the-data">Where is the data?<a class="anchor" aria-label="anchor" href="#where-is-the-data"></a>
</h2>
<p>If you are interested where the data is stored, you can make use of the function <code>eupp_get_source_url()</code>. Typically not required to be used by an end-user.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">urls</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eupp_get_source_urls.html">eupp_get_source_urls</a></span><span class="op">(</span><span class="va">conf</span><span class="op">)</span>                           <span class="co"># GRIB file</span>
<span class="va">urls</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eupp_get_source_urls.html">eupp_get_source_urls</a></span><span class="op">(</span><span class="va">conf</span>, fileext <span class="op">=</span> <span class="st">"index"</span><span class="op">)</span>        <span class="co"># GRIB index/inventory</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-grib-inventory">Getting GRIB inventory<a class="anchor" aria-label="anchor" href="#getting-grib-inventory"></a>
</h2>
<p>Given the same object <code>conf</code> we can retrieve the GRIB inventory which matches our requirements.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">inv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gridded.html">eupp_get_inventory</a></span><span class="op">(</span><span class="va">conf</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">inv</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##                                                              path domain</span>
<span class="co">## 529       data/fcs/surf/EU_forecast_ctr_surf_params_2017-07_0.grb      g</span>
<span class="co">## 546       data/fcs/surf/EU_forecast_ctr_surf_params_2017-07_0.grb      g</span>
<span class="co">## 2729      data/fcs/surf/EU_forecast_ctr_surf_params_2017-07_0.grb      g</span>
<span class="co">## 2746      data/fcs/surf/EU_forecast_ctr_surf_params_2017-07_0.grb      g</span>
<span class="co">## 115371 data/fcs/surf/EU_forecast_ens_surf_params_2017-07-01_0.grb      g</span>
<span class="co">## 115388 data/fcs/surf/EU_forecast_ens_surf_params_2017-07-01_0.grb      g</span>
<span class="co">##        levtype step_char param class type stream expver leg_number    offset</span>
<span class="co">## 529        sfc        24    2t    od   cf   enfo   0001          1  12191040</span>
<span class="co">## 546        sfc        24    cp    od   cf   enfo   0001          1  12602400</span>
<span class="co">## 2729       sfc       240    2t    od   cf   enfo   0001          1  63022200</span>
<span class="co">## 2746       sfc       240    cp    od   cf   enfo   0001          1  63433560</span>
<span class="co">## 115371     sfc        24    2t    od   pf   enfo   0001          1 609540720</span>
<span class="co">## 115388     sfc        24    cp    od   pf   enfo   0001          1 609952080</span>
<span class="co">##        length param_id number       init step      valid</span>
<span class="co">## 529     23412      167      0 2017-07-01   24 2017-07-02</span>
<span class="co">## 546     23412      143      0 2017-07-01   24 2017-07-02</span>
<span class="co">## 2729    23412      167      0 2017-07-01  240 2017-07-11</span>
<span class="co">## 2746    23412      143      0 2017-07-01  240 2017-07-11</span>
<span class="co">## 115371  23412      167      1 2017-07-01   24 2017-07-02</span>
<span class="co">## 115388  23412      143      1 2017-07-01   24 2017-07-02</span></code></pre>
<p>As we have set <code>cache</code> when calling <code><a href="../reference/eupp_config.html">eupp_config()</a></code> the GRIB index file is stored locally, if the same index file is required once again the loading times should be much faster. Not required but may save some time in certain situations.</p>
</div>
<div class="section level2">
<h2 id="getting-data-grib-format">Getting data: GRIB format<a class="anchor" aria-label="anchor" href="#getting-data-grib-format"></a>
</h2>
<p>From <code><a href="../reference/gridded.html">eupp_get_inventory()</a></code> we know that there are 204 fields matching our configuration. <code><a href="../reference/gridded.html">eupp_download_gridded()</a></code> allows us to retrieve the data in either GRIB or NetCDF (next section).</p>
<p>Will internally access the GRIB index and download the fields matching our configuration. The data is stored in <code>output_file</code> (GRIB version 1 format).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/gridded.html">eupp_download_gridded</a></span><span class="op">(</span><span class="va">conf</span>, output_file <span class="op">=</span> <span class="st">"_test.grb"</span>, output_format <span class="op">=</span> <span class="st">"grib"</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-data-netcdf">Getting data: NetCDF<a class="anchor" aria-label="anchor" href="#getting-data-netcdf"></a>
</h2>
<p>When the <code>output_file</code> can be identified as a NetCDF file or <code>output_format</code> is explicitly set to <code>"nc"</code> the resulting file will be a NetCDF file (classic 64 bit NetCDF) file. This requires <a href="https://confluence.ecmwf.int/display/ECC/ecCodes+Home" class="external-link">ecCodes</a> to be installed as the R package will call <code>grib_to_netcdf</code> for format conversion.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/gridded.html">eupp_download_gridded</a></span><span class="op">(</span><span class="va">conf</span>, output_file <span class="op">=</span> <span class="st">"_test.nc"</span>, output_format <span class="op">=</span> <span class="st">"nc"</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##   Converting grib file to netcdf</span></code></pre>
<pre><code><span class="co">## Warning in system(sprintf("grib_set -s number=0 -w type=cf %1$s %1$s",</span>
<span class="co">## tmp_file), : running command 'grib_set -s number=0 -w type=cf /tmp/RtmpE7Ftlv/</span>
<span class="co">## file4fab77a38a276.grb /tmp/RtmpE7Ftlv/file4fab77a38a276.grb' had status 211</span></code></pre>
<p>Which can be processed using e.g., <code>[ncdf4](https://cran.r-project.org/package=ncdf4)</code>, <code>[stars](https://cran.r-project.org/package=stars)</code> or the package of your choice.</p>
<div class="section level5">
<h5 id="reading-data-using-ncdf4">Reading data using <code>ncdf4</code><a class="anchor" aria-label="anchor" href="#reading-data-using-ncdf4"></a>
</h5>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="http://cirrus.ucsd.edu/~pierce/ncdf/" class="external-link">"ncdf4"</a></span><span class="op">)</span>
<span class="va">nc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ncdf4/man/nc_open.html" class="external-link">nc_open</a></span><span class="op">(</span><span class="st">"_test.nc"</span><span class="op">)</span>
<span class="va">nc</span></code></pre></div>
<pre><code><span class="co">## File _test.nc (NC_FORMAT_64BIT):</span>
<span class="co">## </span>
<span class="co">##      2 variables (excluding dimension variables):</span>
<span class="co">##         short t2m[longitude,latitude,number,time]   </span>
<span class="co">##             scale_factor: 0.000448698228611921</span>
<span class="co">##             add_offset: 287.375874283698</span>
<span class="co">##             _FillValue: -32767</span>
<span class="co">##             missing_value: -32767</span>
<span class="co">##             units: K</span>
<span class="co">##             long_name: 2 metre temperature</span>
<span class="co">##         short cp[longitude,latitude,number,time]   </span>
<span class="co">##             scale_factor: 9.41202754152727e-07</span>
<span class="co">##             add_offset: 0.0308394494425682</span>
<span class="co">##             _FillValue: -32767</span>
<span class="co">##             missing_value: -32767</span>
<span class="co">##             units: m</span>
<span class="co">##             long_name: Convective precipitation</span>
<span class="co">##             standard_name: lwe_thickness_of_convective_precipitation_amount</span>
<span class="co">## </span>
<span class="co">##      4 dimensions:</span>
<span class="co">##         longitude  Size:93 </span>
<span class="co">##             units: degrees_east</span>
<span class="co">##             long_name: longitude</span>
<span class="co">##         latitude  Size:125 </span>
<span class="co">##             units: degrees_north</span>
<span class="co">##             long_name: latitude</span>
<span class="co">##         number  Size:21 </span>
<span class="co">##             long_name: ensemble_member</span>
<span class="co">##         time  Size:2 </span>
<span class="co">##             units: hours since 1900-01-01 00:00:00.0</span>
<span class="co">##             long_name: time</span>
<span class="co">##             calendar: gregorian</span>
<span class="co">## </span>
<span class="co">##     2 global attributes:</span>
<span class="co">##         Conventions: CF-1.6</span>
<span class="co">##         history: 2022-01-07 19:09:47 GMT by grib_to_netcdf-2.16.0: grib_to_netcdf /tmp/RtmpE7Ftlv/file4fab77a38a276.grb -o _test.nc</span></code></pre>
</div>
<div class="section level5">
<h5 id="reading-data-using-stars">Reading data using <code>stars</code><a class="anchor" aria-label="anchor" href="#reading-data-using-stars"></a>
</h5>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-spatial.github.io/stars/" class="external-link">"stars"</a></span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/stars/reference/read_stars.html" class="external-link">read_stars</a></span><span class="op">(</span><span class="st">"_test.nc"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Warning in CPL_read_gdal(as.character(x), as.character(options),</span>
<span class="co">## as.character(driver), : GDAL Message 1: The dataset has several variables</span>
<span class="co">## that could be identified as vector fields, but not all share the same primary</span>
<span class="co">## dimension. Consequently they will be ignored.</span>

<span class="co">## Warning in CPL_read_gdal(as.character(x), as.character(options),</span>
<span class="co">## as.character(driver), : GDAL Message 1: The dataset has several variables</span>
<span class="co">## that could be identified as vector fields, but not all share the same primary</span>
<span class="co">## dimension. Consequently they will be ignored.</span></code></pre>
<pre><code><span class="co">## Warning in CPL_read_gdal(as.character(x), as.character(options),</span>
<span class="co">## as.character(driver), : GDAL Message 1: dimension #1 (number) is not a Time</span>
<span class="co">## dimension.</span></code></pre>
<pre><code><span class="co">## Warning in CPL_read_gdal(as.character(x), as.character(options),</span>
<span class="co">## as.character(driver), : GDAL Message 1: The dataset has several variables</span>
<span class="co">## that could be identified as vector fields, but not all share the same primary</span>
<span class="co">## dimension. Consequently they will be ignored.</span></code></pre>
<pre><code><span class="co">## Warning in CPL_read_gdal(as.character(x), as.character(options),</span>
<span class="co">## as.character(driver), : GDAL Message 1: dimension #1 (number) is not a Time</span>
<span class="co">## dimension.</span></code></pre>
<pre><code><span class="co">## Warning in CPL_read_gdal(as.character(x), as.character(options),</span>
<span class="co">## as.character(driver), : GDAL Message 1: The dataset has several variables</span>
<span class="co">## that could be identified as vector fields, but not all share the same primary</span>
<span class="co">## dimension. Consequently they will be ignored.</span></code></pre>
<pre><code><span class="co">## t2m,</span></code></pre>
<pre><code><span class="co">## Warning in CPL_read_gdal(as.character(x), as.character(options),</span>
<span class="co">## as.character(driver), : GDAL Message 1: The dataset has several variables</span>
<span class="co">## that could be identified as vector fields, but not all share the same primary</span>
<span class="co">## dimension. Consequently they will be ignored.</span></code></pre>
<pre><code><span class="co">## Warning in CPL_read_gdal(as.character(x), as.character(options),</span>
<span class="co">## as.character(driver), : GDAL Message 1: dimension #1 (number) is not a Time</span>
<span class="co">## dimension.</span></code></pre>
<pre><code><span class="co">## cp,</span></code></pre>
<pre><code><span class="co">## Warning in CPL_read_gdal(as.character(x), as.character(options),</span>
<span class="co">## as.character(driver), : GDAL Message 1: The dataset has several variables</span>
<span class="co">## that could be identified as vector fields, but not all share the same primary</span>
<span class="co">## dimension. Consequently they will be ignored.</span>

<span class="co">## Warning in CPL_read_gdal(as.character(x), as.character(options),</span>
<span class="co">## as.character(driver), : GDAL Message 1: dimension #1 (number) is not a Time</span>
<span class="co">## dimension.</span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## stars object with 4 dimensions and 2 attributes</span>
<span class="co">## attribute(s):</span>
<span class="co">##             Min.      1st Qu.       Median         Mean      3rd Qu.</span>
<span class="co">## t2m [K] 272.6738 2.842395e+02 2.869092e+02 2.875348e+02 2.894860e+02</span>
<span class="co">## cp [m]    0.0000 1.223564e-05 3.021261e-04 1.208465e-03 1.255564e-03</span>
<span class="co">##                 Max.   NA's</span>
<span class="co">## t2m [K] 302.07836914 232500</span>
<span class="co">## cp [m]    0.06167984 232500</span>
<span class="co">## dimension(s):</span>
<span class="co">##        from  to         offset  delta  refsys point values x/y</span>
<span class="co">## x         1  93         -6.125   0.25      NA    NA   NULL [x]</span>
<span class="co">## y         1 125         67.125  -0.25      NA    NA   NULL [y]</span>
<span class="co">## number    1  21              0      1      NA    NA   NULL    </span>
<span class="co">## time      1   2 2017-07-02 UTC 9 days POSIXct    NA   NULL</span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##      x      y number   time </span>
<span class="co">##     93    125     21      2</span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [1] "t2m" "cp"</span></code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Plotting 2m dry air temperature</span>
<span class="fu"><a href="https://r-spatial.github.io/stars/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="st">"t2m"</span><span class="op">]</span>,
     main   <span class="op">=</span> <span class="st">"t2m"</span>,
     col    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.colors</a></span><span class="op">(</span><span class="fl">21</span>, <span class="st">"Blue-Red 2"</span>, rev <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">t2m</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">t2m</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, length <span class="op">=</span> <span class="fl">22</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="gridded_files/figure-html/demoplot_stars-1.png" width="100%"></p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Plotting convective precipitation (mm)</span>
<span class="fu"><a href="https://r-spatial.github.io/stars/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="st">"cp"</span><span class="op">]</span> <span class="op">*</span> <span class="fl">1e3</span>,
     main   <span class="op">=</span> <span class="st">"cp"</span>,
     col    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.colors</a></span><span class="op">(</span><span class="fl">10</span>, <span class="st">"Purple-Yellow"</span>, rev <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
     breaks <span class="op">=</span> <span class="fl">1e3</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">cp</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>, length <span class="op">=</span> <span class="fl">11</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="gridded_files/figure-html/demoplot_stars-2.png" width="100%"></p>
<p>An alternative way to visualize the data using <code>[ggplot2](https://cran.r-project.org/package=ggplot2)</code>, <code>[colorspace](https://cran.r-project.org/package=colorspace)</code> and <code>[sf](https://cran.r-project.org/package=sf)</code> as well as <code>[rnaturalearth](https://cran.r-project.org/package=rnaturalearth)</code> for outlines: ```</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-spatial.github.io/sf/" class="external-link">"sf"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org" class="external-link">"ggplot2"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://colorspace.R-Forge.R-project.org/" class="external-link">"colorspace"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/ropenscilabs/rnaturalearth" class="external-link">"rnaturalearth"</a></span><span class="op">)</span>

<span class="va">ne</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rnaturalearth/man/ne_countries.html" class="external-link">ne_countries</a></span><span class="op">(</span>continent <span class="op">=</span> <span class="st">"europe"</span>, returnclass <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">ne</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://r-spatial.github.io/stars/reference/geom_stars.html" class="external-link">geom_stars</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">x</span><span class="op">[</span><span class="st">"cp"</span><span class="op">]</span> <span class="op">*</span> <span class="fl">1e3</span>, sf <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span>
           <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="st">"time"</span><span class="op">)</span> <span class="op">+</span>
           <span class="fu"><a href="https://colorspace.R-Forge.R-project.org//reference/scale_colour_continuous_sequential.html" class="external-link">scale_fill_continuous_sequential</a></span><span class="op">(</span><span class="st">"Purple-Yellow"</span><span class="op">)</span> <span class="op">+</span>
           <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ne</span>, fill <span class="op">=</span> <span class="st">"transparent"</span><span class="op">)</span> <span class="op">+</span>
           <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">6</span>, <span class="fl">17</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">36</span>, <span class="fl">67</span><span class="op">)</span>, expand <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p><img src="gridded_files/figure-html/demoplot_ggplot-1.png" width="60%" style="display: block; margin: auto;"></p>
<p>TODOD: WHAT? :)</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Reto Stauffer.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
