<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Downloading data â€¢ eupp</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Downloading data">
<meta property="og:description" content="eupp">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eupp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0-1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/getting-started.html">Getting started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../contact.html">Contact</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Downloading data</h1>
            
      
      
      <div class="hidden name"><code>getting-started.Rmd</code></div>

    </div>

    
    
<div class="figure">
<img src="images/download_grib.svg" alt="Rough scheme on the download/processing process."><p class="caption">Rough scheme on the download/processing process.</p>
</div>
<p>The data sets are stored as GRIB version 1 files on the servers alongside with a grib index file which contains the inventory. The inventory contains information of all fields inside the GRIB file and allows to partially download the fields.</p>
<p>When downloading data, the package always first accesses the index file via <code><a href="../reference/download.html">eupp_get_inventory()</a></code> before starting to download the data. <code><a href="../reference/download.html">eupp_download_gridded()</a></code> will download (parts) of the GRIB file and either store it as GRIB, or converts it to NetCDF (requires NetCDF support and ecCodes to be installed; see installation notes).</p>
<p><code><a href="../reference/eupp_get_gridded.html">eupp_get_gridded()</a></code> interfaces <code><a href="../reference/download.html">eupp_download_gridded()</a></code> but deletes the file after use and returns an <em>R</em> object. This can be handy for small tasks or checks, or if you want to store the data as <em>R</em> objects yourself. Also requires NetCDF support.</p>
<div class="section level2">
<h2 id="specify-data-to-be-downloaded">Specify data to be downloaded<a class="anchor" aria-label="anchor" href="#specify-data-to-be-downloaded"></a>
</h2>
<p>Before starting downloading data a configuration object must be created using <code><a href="../reference/eupp_config.html">eupp_config()</a></code> which contains the specification of the data to be retrieved.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Loading the package</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st">"eupp"</span><span class="op">)</span>

<span class="co"># Create custom configuration</span>
<span class="va">conf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eupp_config.html">eupp_config</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"forecast"</span>,
                    kind <span class="op">=</span> <span class="st">"ctr"</span>,
                    level <span class="op">=</span> <span class="st">"surf"</span>,
                    date  <span class="op">=</span> <span class="st">"2017-01-02"</span>,
                    parameter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cp"</span>, <span class="st">"2t"</span><span class="op">)</span>,
                    steps  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6L</span>, <span class="fl">12L</span><span class="op">)</span>,
                    cache <span class="op">=</span> <span class="st">"_cache"</span><span class="op">)</span> <span class="co"># cache is not required</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="where-is-the-data">Where is the data?<a class="anchor" aria-label="anchor" href="#where-is-the-data"></a>
</h2>
<p>If you are interested where the data is stored, you can make use of the function <code><a href="../reference/eupp_get_source_url.html">eupp_get_source_url()</a></code>. Typically not required to be used by an end-user.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eupp_get_source_url.html">eupp_get_source_url</a></span><span class="op">(</span><span class="va">conf</span><span class="op">)</span>                           <span class="co"># GRIB file</span></code></pre></div>
<pre><code><span class="co">## [1] "https://storage.ecmwf.europeanweather.cloud/benchmark-dataset/data/fcs/surf/EU_forecast_ctr_surf_params_2017-01_0.grb"</span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eupp_get_source_url.html">eupp_get_source_url</a></span><span class="op">(</span><span class="va">conf</span>, fileext <span class="op">=</span> <span class="st">"index"</span><span class="op">)</span>        <span class="co"># GRIB index/inventory</span></code></pre></div>
<pre><code><span class="co">## [1] "https://storage.ecmwf.europeanweather.cloud/benchmark-dataset/data/fcs/surf/EU_forecast_ctr_surf_params_2017-01_0.grb.index"</span></code></pre>
</div>
<div class="section level2">
<h2 id="getting-grib-inventory">Getting grib inventory<a class="anchor" aria-label="anchor" href="#getting-grib-inventory"></a>
</h2>
<p>Given the same object <code>conf</code> we can retrieve the grib inventory which matches our requirements.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">inv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/download.html">eupp_get_inventory</a></span><span class="op">(</span><span class="va">conf</span><span class="op">)</span>
<span class="va">inv</span></code></pre></div>
<pre><code><span class="co">##                                                         path domain levtype</span>
<span class="co">## 2883 data/fcs/surf/EU_forecast_ctr_surf_params_2017-01_0.grb      g     sfc</span>
<span class="co">## 2900 data/fcs/surf/EU_forecast_ctr_surf_params_2017-01_0.grb      g     sfc</span>
<span class="co">## 3015 data/fcs/surf/EU_forecast_ctr_surf_params_2017-01_0.grb      g     sfc</span>
<span class="co">## 3032 data/fcs/surf/EU_forecast_ctr_surf_params_2017-01_0.grb      g     sfc</span>
<span class="co">##      step param class type stream expver leg_number   offset length param_id</span>
<span class="co">## 2883    6    2t    od   cf   enfo   0001          1 66438000  23412      167</span>
<span class="co">## 2900    6    cp    od   cf   enfo   0001          1 66849360  23412      143</span>
<span class="co">## 3015   12    2t    od   cf   enfo   0001          1 69481200  23412      167</span>
<span class="co">## 3032   12    cp    od   cf   enfo   0001          1 69892560  23412      143</span>
<span class="co">##            init               valid</span>
<span class="co">## 2883 2017-01-02 2017-01-02 06:00:00</span>
<span class="co">## 2900 2017-01-02 2017-01-02 06:00:00</span>
<span class="co">## 3015 2017-01-02 2017-01-02 12:00:00</span>
<span class="co">## 3032 2017-01-02 2017-01-02 12:00:00</span></code></pre>
<p>As we have set <code>cache</code> when calling <code><a href="../reference/eupp_config.html">eupp_config()</a></code> the GRIB index file is stored locally, if the same index file is required once again the loading times should be much faster. Not required but may save some time in certain situations.</p>
</div>
<div class="section level2">
<h2 id="getting-data">Getting data<a class="anchor" aria-label="anchor" href="#getting-data"></a>
</h2>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="st">"_test.grb"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="../reference/download.html">eupp_download_gridded</a></span><span class="op">(</span><span class="va">conf</span>, output_file <span class="op">=</span> <span class="st">"_test.grb"</span>, output_format <span class="op">=</span> <span class="st">"grb"</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Reto Stauffer.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
